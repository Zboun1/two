<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="css/index.css">
	</head>
	<body>
		<div class="header">
			<div><textarea placeholder="æœ‰ä»€ä¹ˆæ–°é²œäº‹æƒ³åˆ†äº«ç»™å¤§å®¶ï¼Ÿ" id="pla";></textarea></div>
			<div class="header-foot">
				<span>ğŸ˜€</span>
				<span>ğŸ</span>
				<span>ğŸ¥š</span>
				<span>ğŸ¥</span>
				<span>ğŸ“º</span>
				<span>âš¡</span>
				<span>âš™</span>
				<div class="header-foot-right">
					<span id="input-num">0</span>
					<span>å…¬å¼€</span>
					<button id="send">å‘é€</button>
				</div>
			</div>
			
		</div>
		<div id="container">
			<div class="cbody">
				<div class="cbody-left">
					<a href=""><img src="img/icon.jpg"/></a>
				</div>
				<div class="cbody-right">
					<div class="cbody-right-top">
						<h3>æ¯æ—¥ç»æµæ–°é—»</h3>
						<p><span>32åˆ†é’Ÿå‰</span> æ¥è‡ª å¾®åš weibo.com</p>
					</div>
					<div class="cbody-right-bottom">
						æ¯ç»16ç‚¹ä¸¨ä½³èƒ½ä¸­å›½æ¨å‡ºç¬‘è„¸è¯†åˆ«é—¨ç¦ï¼šæ„çœ‰è‹¦è„¸ä¸å¼€é—¨ã€‘ä½œä¸ºåº”å¯¹æ–°å† ç–«æƒ…çš„å¯¹ç­–ï¼Œä½³èƒ½ä¸­å›½å…¬å¸20æ—¥å‘å¸ƒäº†åœ¨è¿›å…¥åŠå…¬å®¤å’Œä¼šè®®å®¤ä¹‹é™…ï¼Œè®¤è¯å‘˜å·¥â€œç¬‘è„¸â€çš„ITç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿè¿˜èƒ½åŒæ—¶æµ‹ä½“æ¸©ã€‚ä½³èƒ½å¸Œæœ›ï¼Œè¯¥ç³»ç»Ÿæœ‰åŠ©äºåœ¨å®¹æ˜“å› ç–«æƒ…å˜å¾—é˜´æš—çš„å…¬å¸å†…åˆ›é€ è‰¯å¥½æ°›å›´ã€‚å‘˜å·¥å’Œè®¿å®¢éœ€é¢å‘è®¾åœ¨å‰å°ç­‰å¤„çš„
					</div>
				</div>
				<div class="cbody-nav">
					<div>ï¹€</div>
					<ul>
						<li class="editor">ç¼–è¾‘</li>
						<li>æ”¶è—</li>
						<li class="delete">åˆ é™¤</li>
						<li>æŠ•è¯‰</li>
						<li>èµ‹å€¼å¾®åšåœ°å€</li>
					</ul>
				</div>
			</div>
		</div>

		<div class="popup-editor" id="popup-editor">
			<div class="editor-content" id="editor-content">
				<h3>ä¿®æ”¹åšæ–‡</h3>
				<textarea name="" rows="" cols="" id="editor-input"></textarea>
				<div>
					<button id="editor-save">ä¿å­˜</button>
                	<button id="editor-close">å…³é—­</button>
				</div>
			</div>
		</div>
		<div class="popup-delete" id="popup-delete">
			<div class="delete-content" id="delete-content">
				<h3>åˆ é™¤åšæ–‡</h3>
				<button id="delete-save">ä¿å­˜</button>
				<button id="delete-close">å…³é—­</button>
			</div>
		</div>
		
		
		<script type="text/javascript">
				var pla = document.getElementById("pla");

				var inputNum = document.getElementById("input-num")

				var send = document.getElementById("send")

				var cbody = document.getElementsByClassName("cbody")[0]

				var container = document.getElementById("container")

				var cbodyEditor = document.getElementsByClassName("editor")
				var cbodyDelete = document.getElementsByClassName("delete")

				var popupEditor = document.getElementById("popup-editor")
				var popupDelete = document.getElementById("popup-delete")

				var editorInput = document.getElementById("editor-input");
				var editorSave = document.getElementById("editor-save");
				var editorClose = document.getElementById("editor-close");
				var deleteSave = document.getElementById("delete-save");
				var deleteClose = document.getElementById("delete-close");

				var editorContent = document.getElementById("editor-content");
				var deleteContent = document.getElementById("delete-content");
				
				var del = null;

				var isDown = false;
				
				pla.onfocus = function(){
					pla.style.background = "white"
				}
				pla.onblur = function(){
					pla.style.background = "rgba(128, 128, 128, 0.2)"
				}
				
				pla.oninput = function(){
					inputNum.innerText = pla.value.length;
					
					if(pla.value){
						send.style.background = "orange"
						send.style.cursor = "pointer"
					}else{
						send.style.cursor = "not-allowed"
						send.style.background = "#FFC180"
					}
				}
				
				send.onclick = function(){
					var inputValue = pla.value
					if(inputValue == 0){
						return
					}
					send.style.cursor = "not-allowed"
					send.style.background = "#FFC180"
					inputNum.innerText = 0;
					
					var newbody = cbody.cloneNode(true)

					newbody.getElementsByClassName("cbody-right-bottom")[0].innerText = inputValue
					
					container.appendChild(newbody)
					pla.value = ""
					bindEditorEvent(container.getElementsByClassName("editor"))
					bindDeleteEvent(container.getElementsByClassName("delete"))
				}
				
				function bindEditorEvent(domList){
					for(var i = 0;i < domList.length;i++){
						domList[i].onclick = function(){
							popupEditor.style.display = "block"
							del = this.parentNode.parentNode
							editorInput.value = del.parentNode.getElementsByClassName("cbody-right-bottom")[0].innerText
						}
					}
				}
				bindEditorEvent(container.getElementsByClassName("editor"))


				function bindDeleteEvent(domList){
					for(var i = 0;i < domList.length;i++){
						domList[i].onclick = function(){
							popupDelete.style.display = "block"
							del = this.parentNode.parentNode
						}
					}
				}
				bindDeleteEvent(container.getElementsByClassName("delete"))

				editorSave.onclick = function(){
					del.parentNode.getElementsByClassName("cbody-right-bottom")[0].innerText = editorInput.value
					popupEditor.style.display = "none"
				}
				editorClose.onclick = function(){
					popupEditor.style.display = "none"
				}
				deleteSave.onclick = function(){
					del.parentNode.remove()
					popupDelete.style.display = "none"
				}
				
				deleteClose.onclick = function(){
					popupDelete.style.display = "none"
				}

				//è·Ÿéšé¼ æ ‡ç§»åŠ¨
				popupEditor.onmousedown = function(){
					isDown = true
				}
				popupEditor.onmouseup = function(){
					isDown = false
				}

				popupEditor.onmousemove = function(event){
					if(!isDown){
						return
					}
					var x = event.clientX;
					var y = event.clientY;

					editorContent.style.left = x - editorContent.offsetWidth/2 + "px";
					editorContent.style.top = y  + "px";
					
				}

				popupDelete.onmousedown = function(){
					isDown = true
				}
				popupDelete.onmouseup = function(){
					isDown = false
				}

				popupDelete.onmousemove = function(event){
					if(!isDown){
						return
					}
					var x = event.clientX;
					var y = event.clientY;

					deleteContent.style.left = x - deleteContent.offsetWidth/2 + "px";
					deleteContent.style.top = y  + "px";
					
				}

			</script>
	</body>
</html>
